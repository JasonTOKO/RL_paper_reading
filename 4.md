# GtS提供的ROS

## node
### cf_node.py
主要用于连接crazyflie，接收crazyflie传来的数据， 并向crazyflie发送指令（通过cf.commander等实现）
#### 发布话题：
cf_id_data: 将crazyflie回传的状态数据以 crazyflie/CFData 格式发布
cf_id_imu: 将crazyflie回传的传感器数据以 sensors_msg/Imu 格式发布
cf_id_pose：将crazyflie回传的姿态信息以 geometry_msgs/PoseStamped 格式发布
cf__id_twist：将crazyflie回传的信息 geometry_msgs/TwistStamped 格式发布
#### 订阅话题：
cf_id_command：订阅 crazyflie/CFData 格式的命令（TAKEOFF、LAND、ESTOP等）
cf_id_motion：订阅 crazyflie/CFMotion 格式的命令（x,y,yaw,dz等）
### joy_controller_node.py & controller_node.py
#### controller类
controller 主要是用于接收cf_node和camara节点的数据，并发布消息给crazyflie
##### controller 发布话题
cf_id_command：发布 crazyflie/CFData 格式的命令（TAKEOFF、LAND、ESTOP等）
cf_id_motion：发布 crazyflie/CFMotion 格式的命令（x,y,yaw,dz等）
cf_id_coll：发布 std_msgs.msg/Bool 格式的命令（标识飞机是否翻转了？）
##### controller 订阅话题
cf_id_data: 订阅 cf_node节点发布的 crazyflie/CFData 类型的数据
cf_id_image 订阅 camara节点发布的 sensor_msgs.msg/CompressedImage 类型的图像数据
#### joy_controller类
joy_controller继承于controller，主要用于订阅joystick节点发布的手柄按键信息，并将按键转换成CFCommand、CFMotion等格式，并调用controller类的run函数发布命令。
##### joy_controller 订阅话题
 joystick_topic：订阅 sensor_msgs.msg/Joy 格式的手柄命令
### py3_cam_node.py & py2_cam_node.py
暂时还没理清怎么接收摄像头的数据
#### camara类
##### 发布话题
##### 提供服务
## msg
### CFCommand.msg
Header stamp
uint8 cmd
uint8 ESTOP=0
uint8 LAND=1
uint8 TAKEOFF=2
### CFData.msg
Header stamp
uint16 ID

string ext_config

float32 accel_x
float32 accel_y
float32 accel_z
float32 v_batt
float64 alt

float32 gyro_x
float32 gyro_y
float32 gyro_z

#yaw counter clockwise is positive
float32 yaw
#pitch up is positive
float32 pitch
#roll right is positive
float32 roll

#X(forward), Y(left)
float32 kalman_vx
float32 kalman_vy

X(forward), Y(left), Z(up)
float32 pos_x
float32 pos_y
float32 pos_z

float32 magx
float32 magy
float32 magz
## CFMotion.msg
Header stamp
float32 x
float32 y
float32 yaw
float32 dz
bool is_flow_motion
## JoyStop.msg
Header stamp
uint8 stop

uint8 COLL_STOP=1
uint8 NO_COLL_STOP=0
